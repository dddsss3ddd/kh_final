<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Han">

	<insert id="t_in" parameterType="hbean">
		insert into test values(#{hval1},#{hval2})
	</insert>

	<insert id="insertAuc" parameterType="haucbean">
		insert into auction_item(
		auc_no,
		user_id,auc_info1,auc_info2,auc_title,
		auc_img1,auc_img2,auc_content,guarantee,
		guarantee_info, auc_price, auc_interval,
		auc_add, auc_start, auc_end, method, method_price
		)
		values(
		auction_item_no_seq.nextval,
		#{user_id},#{auc_info1},#{auc_info2},#{auc_title},
		#{auc_img1},#{auc_img2},#{auc_content},#{guarantee},
		#{guarantee_info}, #{auc_price}, #{auc_interval},
		sysdate,
		<if test="auto_date_s != null and auto_date_e != null ">
			sysdate,
			sysdate+1
		</if>
		<if test="auto_date_s == null and auto_date_e != null">
			TO_DATE(#{auc_start},'yyyy/mm/dd hh24:mi:ss'),
			TO_DATE(#{auc_start},'yyyy/mm/dd hh24:mi:ss')+1
		</if> 
		<if test="auto_date_s != null and auto_date_e == null">
			sysdate,
			sysdate+#{e_date}+#{e_hour}/24+#{e_min}/24/60
		</if> 
		<if test="auto_date_s == null and auto_date_e == null">
			TO_DATE(#{auc_start},'yyyy/mm/dd hh24:mi:ss'),
			TO_DATE(#{auc_start},'yyyy/mm/dd hh24:mi:ss')+#{e_date}+#{e_hour}/24+#{e_min}/24/60
		</if>
		,
		#{method}, #{method_price}
		)
	</insert>
	
	<select id="getdate" resultType="string">
		Select sysdate from dual
	</select>
	
	<select id="getconfuser" parameterType="string" resultType="string">
		select user_id from join001 where user_id=#{user_id}
	</select>

	<insert id="insertcons" parameterType="hconbean">
		insert into consignment
			(cons_no,cons_id,cons_title,cons_img1,cons_img2,
			cons_content,cons_gua,gua_info,cons_price,cons_date,cons_result1,cons_result2)
		values(
			cons_no_seq.nextval,#{cons_id},#{cons_title},
			#{cons_img1},#{cons_img2},#{cons_content},
			<choose>
				<when test="cons_gua == 'yes'">'yes',</when>
				<otherwise>'no',</otherwise>
			</choose>
			#{gua_info},#{cons_price},sysdate,'yet','yet'
		)
	</insert>
	
	<select id="getconslist" resultType="hconbean">
		select * from consignment order by cons_no desc
	</select>
	
	<select id="getconslistno" resultType="int">
		select count(*) from consignment
	</select>
	
	<select id="getconsdetail" parameterType="int" resultType="hconbean">
		select * from consignment where cons_no = #{int}
	</select>
	
</mapper>
